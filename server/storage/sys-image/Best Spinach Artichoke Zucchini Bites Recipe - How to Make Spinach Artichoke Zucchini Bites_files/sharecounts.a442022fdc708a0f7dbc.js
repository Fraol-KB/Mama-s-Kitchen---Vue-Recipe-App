(window.webpackJsonp=window.webpackJsonp||[]).push([["modules/sharecounts"],{"5a1a42262cc7911f0d78":function(t,n,r){"use strict";r.r(n),function(t,s,a){var i=r("7ec90be294f8945e7663"),e=r("891a19eb7d3552f95f46"),o=r("654adc4d2d3e5dbaee18");n.default=t.View.extend({el:".aggregate-count-number",endpoint:"/ajax/sharecounts/",initialize:function(){this.setVariables(),this.$el.length&&!this.$el.data(this.dataKey)&&this.getShareCounts(this.callback.bind(this),this.contentUrl)},setVariables:function(){var t=Object(o.i)("URL_LANGUAGE_PREFIX",window,!1);t&&(this.endpoint="/"+t+this.endpoint),this.logger=new e.a("ShareCounts"),this.overrideDefaults({callback:this.populateShareCounts,contentUrl:"",dataKey:"shareCounts",totalKey:"social_total",showCountClass:"show-count",treshold:50})},getShareCounts:function(t,e){t=Object(o.d)(t),e||(e=i.a.getValue("ogUrl","")),e=s.isString(e)?e.replace(/\/+$/,""):"",a.ajax(this.endpoint,{type:"GET",data:{url:e},context:this,dataType:"json"}).done(this.processShareCounts.bind(this,t)).fail(this.requestFailed.bind(this))},processShareCounts:function(t,e){var a;!s.isEmpty(e)&&Object(o.i)("data."+this.totalKey,e)?(a=Object(o.i)("data",e),this.logger.log("Share counts response",a),t(a)):this.logger.log("Request returned with no items",e)},requestFailed:function(){this.logger.error("Request failed",arguments)},prettyCount:function(t){for(var e,a=0;1<=t/1e3;)a+=1,t=.1<=(t/=1e3)-(e=Math.floor(t))?Math.floor(10*t)/10:e;return t+["","k","m","b","t","q"][a]},populateShareCounts:function(t){var e=Object(o.i)(this.totalKey,t,0);e>this.treshold&&this.$el.text(this.prettyCount(e)).addClass(this.showCountClass).data(this.dataKey,t)}})}.call(this,r("292bef011bf0a540c727"),r("37047f07c1f267630157"),r("4124695a4a0df23fd56c"))}}]);
//# sourceMappingURL=sharecounts.a442022fdc708a0f7dbc.js.map